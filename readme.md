### cal_catenary
本项目是我初学Fortran时的一个练手项目。用于计算固定两端坐标和长度的悬链线函数。

### 程序使用
- 下载二进制文件(./cal_catenary.exe)直接使用即可(win11_x64)。
- 下载```main.f90``` 手动编译。本程序不涉及依赖库，所以编译过程会很轻松。

### 复盘
求解问题如下：
有一均质理想绳子，两端悬挂于```(x1,y1)```,```(x2,y2)```，绳子长度```l```，并受向下的重力场作用（```g```的数值在此问题中不重要），求形成的曲线f(x)。
这是一个[悬链线问题](https://en.wikipedia.org/wiki/Catenary)，莱布尼兹时代就已经得到充分的解决，曲线的形式为
```y= k*cosh((x+c1)/k)+c2```
```k```,```c1```,```c2```是待求解的参数。
数学家在处理这个问题时，将曲线平移掉，形成了非常简单的双曲余弦形式，便于进一步讨论。但本程序面对的问题看上去更加“工程”一点，因此会涉及到无法解析求解的地方。
```c2```是容易的，求出```k```和```c1```之后用边界点求解即可。```k```和```c1```无法解析获得（貌似），因此本项目用二维的牛顿法迭代逼近，作为一个初学的练手项目。

- 收获
  从跑通Fortran的Hello world 到完成这个程序用了大概5小时。理解曲线的数学通式耗时占比约1/3，理解高维的牛顿迭代法用时1/2。剩下的时间用于理解Fortran语法。收获如下：
  - 基本的代码结构（函数、子过程、模组）
  - 简单的命令行I/O
  - 简单的文件I/O
  - 复习了高数的一些基本手艺（手动微积分）
- 有待查漏补缺的地方
  - 由于只有两个参数需要迭代求解，没享受到Fortran内置数组和矩阵操作的方便之处，实际上，在处理这个迭代的时候，是直接手推的微分方程及雅可比矩阵，数值微分的处理方法门都还没入。
  - 获取输入用的```read```，而没有用到命令行参数解析。
  - 没用到数值计算的经典库文件。听说有些Fortran的一大好处就是有许多上古代码可以直接用。
  - 作为练手项目，硬编码较多，没考虑用户体验。
  - 迭代不太稳定，已发现的问题是：1. 有时会获得翻转的函数（重力场向上了）；2. 当绳子太长时，梯度容易爆炸。这些问题和```k```的初猜值很有关系，暂未进一步优化。
  - 也许能用物理模拟的方法求这根曲线，而尽量减少手推数学公式。但感觉完全是另一个方向了（感觉更像是在搭游戏引擎）。

### LICENSE
本项目使用MIT LICENSE。